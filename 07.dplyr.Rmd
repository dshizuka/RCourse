---
title: "Module 7: Data Wrangling with dplyr"
author: "Dai Shizuka"
date: "updated `r format(Sys.time(), '%m/%d/%y')` "
output: 
  html_document:
    toc: true
    toc_depth: 2
    toc_float: true
---

##1. Intro to `dplyr` and the 'tidyverse'

```{r, out.width="10%", echo=F}
knitr::include_graphics("images/hex-dplyr.png")
knitr::include_graphics("images/hex-tidyr.png")
```

Now that we have dipped our feet into plots and stats in R, I think you are getting a better sense of the fact that 'wrangling' or 'manipulating' data is one of the biggest steps to becoming proficient in R and all that it has to offer. 

For example, for any given analysis, you may have to subset data, filter out certain data that don't meet some criteria, focus in on a select set of variables of interest, calculate means, and variance for different groups, etc. etc. 

These tasks are where the packages [dplyr](https://dplyr.tidyverse.org/), [tidyr](https://tidyr.tidyverse.org/) and other packages in the [tidyverse](https://www.tidyverse.org/)--a series of packages designed for all kinds of data tasks. This also includes the popular [ggplot2](https://ggplot2.tidyverse.org/) package for graphics. 

The tidyverse packages are constructed by [Hadley Wickam](http://hadley.nz/). There are several books that cover how to use these packages, including *R for Data Science* [which is available for free as an online book](https://r4ds.had.co.nz/)

```{r, out.width="20%", echo=F}
knitr::include_graphics("images/R_for_Data_Science_cover.png")
```

***

##2. Working with `dplyr`

<br>

###2.1 Main `dplyr` functions

* `select()` select columns by criteria
* `filter()` filter rows by criteria
* `mutate()`: add new variable using functions
* `summarise()`: calculate summary statistic for a given variable
* `arrange()`: change order of rows
* `group_by()`: run any of above function 'by group' defined using criteria

<br>

###2.2 Pipe Operator (`%>%`)

`dplyr` makes use of the pipe operator `%>%`, which allows you to carry over the output of one function to the next function. This can make series of data manipulation sequences much more efficient. 

<br>

###2.3 Tibble

The output of `dplyr` functions is a "tibble", a special class of data frame. It is largely the same as a data.frame but it has some features (or rather, lack of features) that make for 'defensive coding'. That is, it forces you to avoid dangerous operations, such as changing variable names or types (you have to explicitly do this) or allow "partial matching".

To learn more about tibbles, start [here](https://tibble.tidyverse.org/)


* tibble
* functions that have special syntax -- but once you learn them, it's hard to go back.

***

##3. An example using data on chick color of American coots (*Fulica americana*)

[link to data](data/chickcolor_Rclass.csv)

```{r}
dat=read.csv("data/chickcolor_Rclass.csv")
```
